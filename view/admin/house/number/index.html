{extend name="common/layout" /} {block name="main"}
<t-card class="list-card-container" :bordered="false">
  <div style="
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    ">
    <div>
      <t-button theme="primary" @click="handleAdd" :disabled="buttonDisabled">
        <template #icon>
          <t-icon name="add"/>
        </template>
        新建
      </t-button>
      <t-button theme="primary" @click="handleAddMore" style="margin-left: 10px" :disabled="buttonDisabled">
        批量新建
      </t-button>
    </div>
    <div style="
        display: flex;
        align-items: center;
        width: 280px;
        margin-left: 10px;
      ">
      <div style="flex-grow: 1; margin-right: 5px">
        <t-input v-model="searchValue" placeholder="请输入房间、房号" clearable @enter="handleSearch"/>
      </div>
      <t-button theme="primary" @click="handleSearch">
        <template #icon>
          <t-icon name="search"/>
        </template>
      </t-button>
    </div>
    <div style="
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
      ">
      已租房间: {{numberMessage.rented}}, 空闲房间: {{numberMessage.empty}},
      入住率: {{numberMessage.occupancy}}
    </div>
  </div>

  <t-table :data="tableData" :columns="columns" row-key="id" vertical-align="top" :bordered="true" size="small"
           active-row-type="single" :hover="true" :pagination="pagination" :loading="tableLoading">
    <template #state="{ row }">
      <t-tag v-if="row.rent_mark === 'Y'" theme="danger" variant="light">
        已租
      </t-tag>
      <t-tag v-if="row.rent_mark === 'N'" theme="success" variant="light">
        空闲
      </t-tag>
    </template>
    <template #lease_type="{ row }"> {{row.lease_type}} 个月</template>
    <template #op="slotProps">
      <t-space>
        <t-button size="small" @click="handleEdit(slotProps.row)">修改</t-button>
        <t-button size="small" theme="success" v-if="slotProps.row.rent_mark === 'N'"
                  @click="handleCheckIn(slotProps.row)">入住
        </t-button>
        <t-button size="small" theme="warning" v-if="slotProps.row.rent_mark === 'Y'"
                  @click="handleCheckOut(slotProps.row)">退房
        </t-button>
        <t-popconfirm theme="danger" content="确认删除?" @confirm="handleDelete(slotProps.row)">
          <t-button theme="danger" size="small">删除</t-button>
        </t-popconfirm>
      </t-space>
    </template>
  </t-table>


</t-card>


{/block} {block name="script"}
<script>
  const data = {

    // 搜索
    searchValue: "",
    numberMessage: {},

    tableData: [],
    tableLoading: false,
    // 分页
    pagination: {
      defaultPageSize: 10,
      total: 10,
      defaultCurrent: 1,
    },
    columns: [
      {title: "房产名", colKey: "property_name", width: 80, align: "left", fixed: "left"},
      {title: "房间名", colKey: "name", width: 80},
      {title: "房间状态", colKey: "state", width: 80},
      {title: "收租日期", colKey: "rent_date", width: 80},
      {title: "房租", colKey: "rental", width: 80},
      {title: "押金", colKey: "deposit", width: 80},
      {title: "租期", colKey: "lease_type", width: 80},
      {title: "入住日期", colKey: "checkin_time", width: 80},
      {title: "闲置天数", colKey: "idle", width: 80},
      {title: "操作", colKey: "op", width: 160, align: "left", fixed: "right"},
    ],

  };

  function f() {
    return {
      init: function () {
        this.tableLoading = true;

        axiosGet("{:url('getNumberMessage')}").then((response) => {

        })

      },


    };
  }
</script>
{/block}