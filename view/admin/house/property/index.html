{extend name="common/layout" /}


{block name="main"}
<t-card class="list-card-container" :bordered="false">
  <t-button theme="primary" style="margin-bottom: 10px;" @click="handleAdd">
    <template #icon>
      <t-icon name="add"/>
    </template>
    新建
  </t-button>
  <t-table :data="tableData" :columns="columns" row-key="id" vertical-align="top" :bordered="true" size="small"
           active-row-type="single" :hover="true" :loading="tableLoading">
    <template #op="slotProps">
      <t-space>
        <t-button size="small" @click="handleEdit(slotProps.row)">修改</t-button>
        <t-popconfirm theme="danger" content="确认删除?" @confirm="handleDelete(slotProps.row)">
          <t-button theme="danger" size="small">删除</t-button>
        </t-popconfirm>
      </t-space>
    </template>
  </t-table>

</t-card>
{/block}


{block name="script"}
<script>
  const data = {
    tableData: [],
    tableLoading: false,
    columns: [
      {title: '房产名', colKey: 'name', width: 100, align: 'left', fixed: 'left',},
      {title: '详细地址', colKey: 'address', width: 160},
      {title: '房东名称', colKey: 'landlord', width: 100},
      {title: '房东手机', colKey: 'phone', width: 160},
      {title: '房东身份证', colKey: 'id_card', width: 160},
      {title: '操作', colKey: 'op', width: 160, align: 'left', fixed: 'right',},
    ],
  };

  function f() {
    return {
      init: function () {
        this.tableLoading = true;
        axiosGet("{:url('queryProperty')}").then(response => {
          if (response.code == 1) {
            this.tableData = response.data;
          } else {
            this.$message.error('系统出错了!!!');
          }
          this.tableLoading = false;
        })

      },

      handleAdd() {

      }
    }
  }


</script>

{/block}